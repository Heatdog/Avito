# Техническое задание на позицию Golang разработчика в Avito

Для запуска приложения запустите скрипт start.sh. 
Будет поднято 2 контейнера:
- Контейнер с сервером, работющий на хосте, указанному в config.yaml файле;
- PostgreSQL. Хранение всей ифнормации о системе;

Для получения документации о работе endpoint`s, после запуска сервера откройте [URL](http://localhost:8080/swagger/index.html#/)
Докуметация создана с помощью Swagger. 

## Информация о доп заданиях

- [x] 1. В качестве кэша используется in-memory lru кэш. Вместимость и TTL можно задать в [config](configs/config.yaml) файле. Приоритет пал именно на in-memory, т.к. по заданию SLI = 99.99%, соответсвенно лучше сделать меньше зависимостей, а также он работает быстрее, чем Redis. Тем более, по заданию мы можем хранить устаревшие данные в кеше не более 5-и минут, поэтому выбор, как именно мы будем инвалидировать удаленные/измененные данные пал именно на TTL в 5 минут. При этом, у нас сохраняется согласованность между кэшами при развертывании сервиса в нескольких подах.
- [x] 2. 
- [x] 3. Т.к. по заданию мы храним только 3 последнии версии, то выбор версионирования пал на SCD3 с использованием 3-ёх полей под контент баннера. При этом, в API были добавлены следующие изменения: 
* /user_banner [get] - добавлен необязательный query параметр с указанием версии баннера. Если параметр отсутсвует, то выбирается последняя версия. 
* /banner [get] - выводятся все баннеры со всеми версиями. Поля content_v1, content_v2 и content_v3.
* /banner/{id} [patch] - если поле content не пустое, то оно смещает предыдущие значения полей content: v1->v2, v2->v3.
* /banerr/{id}/{version} [patch] - версия v становиться основной у баннера id.
- [x] 4. Метод вызывается асинхронно, при этом пользователю возвращается статус код 202.
- [x] 5. Проведены интеграционные [тесты](internal/transport/banners/tests/) для всех endpoints. Используемый пакет для мока PostgreSQL - github.com/pashagolub/pgxmock/v2.
- [x] 6. Линтер добавлен

[Примеры запросов](/examples/). Curl сгенерированы через Swagger.
